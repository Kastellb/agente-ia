const GROQ_API_KEY = "TU_API_KEY_AQUI"; // üîë pega aqu√≠ tu API Key

function doPost(e) {
  try {
    const data = JSON.parse(e.postData.contents);
    const userText = data.text;

    const response = UrlFetchApp.fetch("https://api.groq.com/openai/v1/chat/completions", {
      method: "post",
      headers: {
        "Authorization": "Bearer " + GROQ_API_KEY,
        "Content-Type": "application/json",
      },
      payload: JSON.stringify({
        model: "llama3-8b-8192",
        messages: [{ role: "user", content: userText }],
      }),
    });

    const result = JSON.parse(response.getContentText());
    const reply = result.choices[0].message.content;

    return ContentService.createTextOutput(
      JSON.stringify({ reply })
    ).setMimeType(ContentService.MimeType.JSON);

  } catch (err) {
    return ContentService.createTextOutput(
      JSON.stringify({ reply: "‚ùå Error en Apps Script" })
    ).setMimeType(ContentService.MimeType.JSON);
  }
}
